{"version":3,"sources":["meteor://ðŸ’»app/packages/rocketchat:login-token/server/login_token_server.js"],"names":["Accounts","registerLoginHandler","result","loginToken","user","Meteor","users","findOne","update","_id","$unset","userId"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEAA,SAASC,oBAAT,CAA8B,aAA9B,EAA6C,UAASC,MAAT,EAAiB;AAC7D,MAAI,CAACA,OAAOC,UAAZ,EAAwB;AACvB;AACA;;AAED,QAAMC,OAAOC,OAAOC,KAAP,CAAaC,OAAb,CAAqB;AACjC,iCAA6BL,OAAOC;AADH,GAArB,CAAb;;AAIA,MAAIC,IAAJ,EAAU;AACTC,WAAOC,KAAP,CAAaE,MAAb,CAAoB;AAACC,WAAKL,KAAKK;AAAX,KAApB,EAAqC;AAACC,cAAQ;AAAC,+BAAuB;AAAxB;AAAT,KAArC;AAEA,WAAO;AACNC,cAAQP,KAAKK;AADP,KAAP;AAGA;AACD,CAhBD,E","file":"/packages/rocketchat_login-token.js","sourcesContent":["/* globals Accounts */\n\nAccounts.registerLoginHandler('login-token', function(result) {\n\tif (!result.loginToken) {\n\t\treturn;\n\t}\n\n\tconst user = Meteor.users.findOne({\n\t\t'services.loginToken.token': result.loginToken\n\t});\n\n\tif (user) {\n\t\tMeteor.users.update({_id: user._id}, {$unset: {'services.loginToken': 1}});\n\n\t\treturn {\n\t\t\tuserId: user._id\n\t\t};\n\t}\n});\n"]}