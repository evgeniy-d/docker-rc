{"version":3,"sources":["meteor://ðŸ’»app/packages/rocketchat:iframe-login/iframe_rocketchat.js","meteor://ðŸ’»app/packages/rocketchat:iframe-login/iframe_server.js"],"names":["Meteor","startup","RocketChat","settings","addGroup","section","add","type","public","Accounts","registerLoginHandler","result","iframe","console","log","user","users","findOne","token","userId","_id","methods","credentialToken","credentialSecret","OAuth","retrieveCredential"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,OAAOC,OAAP,CAAe,YAAW;AACzBC,aAAWC,QAAX,CAAoBC,QAApB,CAA6B,UAA7B,EAAyC,YAAW;AACnD,SAAKC,OAAL,CAAa,QAAb,EAAuB,YAAW;AACjC,WAAKC,GAAL,CAAS,yBAAT,EAAoC,KAApC,EAA2C;AAAEC,cAAM,SAAR;AAAmBC,gBAAQ;AAA3B,OAA3C;AACA,WAAKF,GAAL,CAAS,qBAAT,EAAgC,EAAhC,EAAoC;AAAEC,cAAM,QAAR;AAAkBC,gBAAQ;AAA1B,OAApC;AACA,WAAKF,GAAL,CAAS,yBAAT,EAAoC,EAApC,EAAwC;AAAEC,cAAM,QAAR;AAAkBC,gBAAQ;AAA1B,OAAxC;AACA,WAAKF,GAAL,CAAS,4BAAT,EAAuC,MAAvC,EAA+C;AAAEC,cAAM,QAAR;AAAkBC,gBAAQ;AAA1B,OAA/C;AACA,KALD;AAMA,GAPD;AAQA,CATD,E;;;;;;;;;;;ACAA;AAEAC,SAASC,oBAAT,CAA8B,QAA9B,EAAwC,UAASC,MAAT,EAAiB;AACxD,MAAI,CAACA,OAAOC,MAAZ,EAAoB;AACnB;AACA;;AAEDC,UAAQC,GAAR,CAAY,+BAAZ;AAEA,QAAMC,OAAOf,OAAOgB,KAAP,CAAaC,OAAb,CAAqB;AACjC,6BAAyBN,OAAOO;AADC,GAArB,CAAb;;AAIA,MAAIH,IAAJ,EAAU;AACT,WAAO;AACNI,cAAQJ,KAAKK;AADP,KAAP;AAGA;AACD,CAhBD;AAmBApB,OAAOqB,OAAP,CAAe;AACd,6BAA2BC,eAA3B,EAA4CC,gBAA5C,EAA8D;AAC7D,WAAOC,MAAMC,kBAAN,CAAyBH,eAAzB,EAA0CC,gBAA1C,CAAP;AACA;;AAHa,CAAf,E","file":"/packages/rocketchat_iframe-login.js","sourcesContent":["Meteor.startup(function() {\n\tRocketChat.settings.addGroup('Accounts', function() {\n\t\tthis.section('Iframe', function() {\n\t\t\tthis.add('Accounts_iframe_enabled', false, { type: 'boolean', public: true });\n\t\t\tthis.add('Accounts_iframe_url', '', { type: 'string', public: true });\n\t\t\tthis.add('Accounts_Iframe_api_url', '', { type: 'string', public: true });\n\t\t\tthis.add('Accounts_Iframe_api_method', 'POST', { type: 'string', public: true });\n\t\t});\n\t});\n});\n","/* globals Accounts, OAuth */\n\nAccounts.registerLoginHandler('iframe', function(result) {\n\tif (!result.iframe) {\n\t\treturn;\n\t}\n\n\tconsole.log('[Method] registerLoginHandler');\n\n\tconst user = Meteor.users.findOne({\n\t\t'services.iframe.token': result.token\n\t});\n\n\tif (user) {\n\t\treturn {\n\t\t\tuserId: user._id\n\t\t};\n\t}\n});\n\n\nMeteor.methods({\n\t'OAuth.retrieveCredential'(credentialToken, credentialSecret) {\n\t\treturn OAuth.retrieveCredential(credentialToken, credentialSecret);\n\t}\n});\n"]}